---
pagination:
  data: collections.tagList
  size: 1
  alias: tag
  addAllPagesToCollections: true
layout: layouts/base.njk
permalink: /tags/{{ tag }}/
eleventyComputed:
  title: "Posts tagged '{{ tag }}'"
---

<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
	<header class="mb-8">
		<h1 class="text-3xl font-bold content-text mb-4">
			Posts tagged "{{ tag }}"
		</h1>
		<p class="content-text">
			<a href="/" class="link-green">‚Üê Back to all posts</a>
		</p>
	</header>

	<section>
		{% set taggedPosts = collections.post | reverse %}
		{% set filteredPosts = [] %}
		
		{%- for post in taggedPosts -%}
			{%- if post.data.tags and (tag in post.data.tags) -%}
				{%- set filteredPosts = (filteredPosts.push(post), filteredPosts) -%}
			{%- endif -%}
		{%- endfor -%}

		{% if filteredPosts.length > 0 %}
		<div class="space-y-8">
			{% for post in filteredPosts %}
			<article class="post-card pb-8">
				<header class="mb-4">
					<h2 class="text-xl font-semibold mb-2">
						<a href="{{ post.url }}" class="content-text link-green">
							{{ post.data.title }}
						</a>
					</h2>
					<div class="text-sm mb-3 content-text">
						<time datetime="{{ post.data.date | date('Y-m-d') }}">
							{{ post.data.date | date("F j, Y") }}
						</time>
					</div>
					{# 
					{% if post.data.tags and post.data.tags.length > 0 %}
					<div class="flex flex-wrap gap-2 mb-3">
						{% for postTag in post.data.tags %}
						{% if postTag != "post" %}
						<a href="/tags/{{ postTag }}/" class="tag hover:bg-opacity-30 transition-colors">
							{{ postTag }}
						</a>
						{% endif %}
						{% endfor %}
					</div>
					{% endif %}
					#}
				</header>
				
				<div class="mb-4 content-text">
					{% set excerpt = post.templateContent | striptags | truncate(300) %}
					{{ excerpt }}
				</div>
				
				<a href="{{ post.url }}" class="inline-flex items-center font-medium link-green">
					Read more
					<svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
					</svg>
				</a>
			</article>
			{% endfor %}
		</div>
		{% else %}
		<div class="text-center py-12">
			<p class="text-lg content-text">
				No posts found with the tag "{{ tag }}".
			</p>
		</div>
		{% endif %}
	</section>
</div>